# üìã Complete File Reference

## Project Files Overview

### üîß Configuration Files

#### `pubspec.yaml`
```yaml
dependencies:
  flutter:
    sdk: flutter
  firebase_core: ^3.8.1        # Firebase initialization
  firebase_auth: ^5.3.4        # User authentication
  cloud_firestore: ^5.5.2      # Database operations
  provider: ^6.1.2             # State management
```

### üì± Main Application

#### `lib/main.dart` (66 lines)
**Purpose**: App entry point, Firebase initialization, multi-provider setup

**Key Features**:
- Firebase initialization with `Firebase.initializeApp()`
- MultiProvider wrapping for AuthProvider, CartProvider, OrderProvider
- AuthWrapper for conditional routing (logged in ‚Üí Home, logged out ‚Üí Login)
- Material theme configuration

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  runApp(const MyApp());
}
```

#### `lib/firebase_options.dart` (78 lines)
**Purpose**: Firebase configuration for all platforms

**What it contains**:
- Platform-specific Firebase configuration (Android, iOS, Web, macOS)
- API keys, App IDs, Project IDs
- Auto-generated by `flutterfire configure`

**Note**: Replace placeholder values with actual Firebase credentials

---

## üì¶ Models (Data Structures)

### `lib/models/user.dart` (57 lines)
**Purpose**: User profile data structure

**Fields**:
- `id`: User unique identifier (from Firebase Auth)
- `email`: User email address
- `name`: Full name
- `phoneNumber`: Optional phone
- `address`: Optional delivery address

**Methods**:
- `toMap()`: Convert to Firestore document
- `fromMap()`: Create from Firestore data
- `copyWith()`: Create modified copy

### `lib/models/food.dart` (69 lines)
**Purpose**: Food item data structure

**Fields**:
- `id`: Food unique identifier
- `name`: Food name
- `description`: Detailed description
- `price`: Price (double)
- `imageUrl`: Remote image URL
- `category`: Food category (Pizza, Burgers, etc.)
- `isAvailable`: Stock availability

**Methods**:
- `toMap()`: Firestore serialization
- `fromMap()`: Firestore deserialization
- `copyWith()`: Immutable updates

### `lib/models/order.dart` (103 lines)
**Purpose**: Order and OrderItem data structures

**OrderItem**:
- `foodId`, `foodName`, `price`, `quantity`
- `totalPrice` getter

**Order**:
- `id`: Order identifier
- `userId`: Owner user ID
- `items`: List of OrderItem
- `totalAmount`: Total price
- `status`: pending | preparing | delivered | cancelled
- `createdAt`: Timestamp
- `deliveryAddress`: Optional address

---

## üîå Services (Firebase Operations)

### `lib/services/firebase_auth_service.dart` (138 lines)
**Purpose**: Authentication business logic

**Methods**:
- `signUp()`: Create account with email/password, create user document
- `signIn()`: Authenticate user, fetch user data
- `signOut()`: Log out user
- `getUserData()`: Fetch user profile from Firestore
- `updateUserProfile()`: Update user name, phone, address
- `authStateChanges`: Stream of auth state changes

**Error Handling**:
- Catches `FirebaseAuthException`
- Provides user-friendly error messages

### `lib/services/firebase_food_service.dart` (69 lines)
**Purpose**: Food data operations

**Methods**:
- `getFoods()`: Stream of all available foods
- `getFoodById()`: Fetch single food item
- `getFoodsByCategory()`: Filter by category
- `searchFoods()`: Search by name (local filter)

**Returns**: Streams for real-time updates

### `lib/services/firebase_order_service.dart` (65 lines)
**Purpose**: Order management

**Methods**:
- `placeOrder()`: Create new order in Firestore
- `getUserOrders()`: Stream of user's orders
- `getOrderById()`: Fetch single order
- `updateOrderStatus()`: Change order status
- `cancelOrder()`: Set status to 'cancelled'

---

## üéõÔ∏è Providers (State Management)

### `lib/providers/auth_provider.dart` (122 lines)
**Purpose**: Authentication state management

**State**:
- `currentUser`: Current AppUser or null
- `isLoading`: Loading indicator
- `errorMessage`: Error text

**Methods**:
- `signUp()`: Create account and update state
- `signIn()`: Authenticate and update state
- `signOut()`: Clear user state
- `updateProfile()`: Update and refresh user data

**Lifecycle**:
- Listens to `authStateChanges` stream
- Auto-updates UI on auth changes

### `lib/providers/cart_provider.dart` (96 lines)
**Purpose**: Shopping cart state (local, not persisted)

**State**:
- `_items`: Map of food ID ‚Üí CartItem
- `itemCount`, `totalQuantity`, `totalAmount` getters

**Methods**:
- `addItem()`: Add food to cart
- `removeItem()`: Remove from cart
- `increaseQuantity()`: Increment count
- `decreaseQuantity()`: Decrement count (removes if 1)
- `clear()`: Empty cart
- `getOrderItems()`: Convert to OrderItem list

**Note**: Cart clears on app restart (no persistence)

### `lib/providers/order_provider.dart` (91 lines)
**Purpose**: Order state management

**State**:
- `orders`: List of user's orders
- `isLoading`, `errorMessage`

**Methods**:
- `placeOrder()`: Create order via service
- `loadUserOrders()`: Start listening to user's orders
- `cancelOrder()`: Cancel specific order

**Real-time**: Listens to Firestore stream for live updates

---

## üñºÔ∏è Screens (UI Components)

### `lib/screens/login_screen.dart` (178 lines)
**Purpose**: User login interface

**Features**:
- Email and password input fields
- Form validation (email format, password length)
- Password visibility toggle
- Loading state during login
- Error message display
- Link to signup screen

**Form Validation**:
- Email must contain `@`
- Password minimum 6 characters

### `lib/screens/signup_screen.dart` (203 lines)
**Purpose**: User registration interface

**Features**:
- Name, email, password, confirm password fields
- Form validation
- Password matching check
- Auto-login after successful signup
- Loading indicator

**Validation**:
- All fields required
- Passwords must match
- Email format check

### `lib/screens/home_screen.dart` (284 lines)
**Purpose**: Main screen with bottom navigation

**Components**:
- `HomeScreen`: Container with BottomNavigationBar
- `FoodListView`: Food listing with StreamBuilder
- `FoodCard`: Individual food item card

**Features**:
- Welcome message with user name
- Food list from Firestore (real-time)
- Cart icon with badge showing item count
- Bottom navigation: Home | Orders | Profile

**Navigation**:
- Tap food card ‚Üí Food Details
- Tap cart icon ‚Üí Cart Screen

### `lib/screens/food_details_screen.dart` (175 lines)
**Purpose**: Food item details and add to cart

**Features**:
- Full-screen food image (with error fallback)
- Food name, category badge, price
- Detailed description
- Availability status indicator
- "Add to Cart" button (sticky bottom)

**Behavior**:
- Disabled button if not available
- Shows snackbar on add to cart
- Navigator pop after adding

### `lib/screens/cart_screen.dart` (259 lines)
**Purpose**: Shopping cart and checkout

**Components**:
- `CartScreen`: Main cart view
- `CartItemCard`: Individual cart item with controls

**Features**:
- Empty cart state with icon
- List of cart items with images
- Quantity controls (+/-)
- Remove item button
- Total amount display
- "Place Order" button

**Checkout**:
- Calls `orderProvider.placeOrder()`
- Clears cart on success
- Shows success/error messages
- Auto-navigates back

### `lib/screens/order_screen.dart` (242 lines)
**Purpose**: Order history view

**Components**:
- `OrderScreen`: Main orders view
- `OrderCard`: Expandable order card

**Features**:
- Empty state if no orders
- List of orders (newest first)
- Order status color coding
- Expandable to show order items
- Formatted date display

**Status Colors**:
- Pending: Orange
- Preparing: Blue
- Delivered: Green
- Cancelled: Red

### `lib/screens/profile_screen.dart` (241 lines)
**Purpose**: User profile view and editing

**Features**:
- Profile avatar with initial
- Email display (non-editable)
- Editable name, phone, address
- Edit mode toggle
- Save/Cancel buttons
- Logout button

**Edit Mode**:
- Click edit icon ‚Üí Enable editing
- Fields become editable
- Save updates to Firestore
- Cancel discards changes

---

## üìä Data Flow Examples

### Login Flow
```
LoginScreen 
  ‚Üí AuthProvider.signIn() 
    ‚Üí FirebaseAuthService.signIn() 
      ‚Üí Firebase Auth
      ‚Üí Firestore (fetch user data)
    ‚Üí Update AuthProvider state
  ‚Üí AuthWrapper detects change
    ‚Üí Navigate to HomeScreen
```

### Add to Cart Flow
```
FoodDetailsScreen
  ‚Üí CartProvider.addItem(food)
    ‚Üí Update local state
    ‚Üí notifyListeners()
  ‚Üí UI updates (cart badge count)
```

### Place Order Flow
```
CartScreen
  ‚Üí OrderProvider.placeOrder()
    ‚Üí FirebaseOrderService.placeOrder()
      ‚Üí Create order document in Firestore
    ‚Üí Update OrderProvider state
  ‚Üí CartProvider.clear()
  ‚Üí Show success message
  ‚Üí Navigate back
```

### Real-time Food Updates
```
HomeScreen (FoodListView)
  ‚Üí StreamBuilder<List<Food>>
    ‚Üí FirebaseFoodService.getFoods()
      ‚Üí Firestore.collection('foods').snapshots()
    ‚Üí UI rebuilds automatically on data change
```

---

## üé® UI Components Reference

### Theme Colors
- Primary: `Colors.orange`
- Scaffold Background: `Colors.grey[50]`
- Card Background: `Colors.white`
- Error: `Colors.red`
- Success: `Colors.green`

### Common Widgets
- **TextFormField**: Outlined border, icon prefix
- **ElevatedButton**: Primary color, rounded corners
- **Card**: Slight elevation, margin
- **AppBar**: No elevation, centered title

### Icons Used
- `Icons.restaurant_menu`: App logo
- `Icons.shopping_cart`: Cart
- `Icons.receipt_long`: Orders
- `Icons.person`: Profile
- `Icons.add/remove`: Quantity controls

---

## üîê Security Considerations

### Current Implementation (Development)
- ‚úÖ Firebase Authentication enabled
- ‚úÖ Firestore rules allow authenticated reads
- ‚úÖ Users can only read/write their own data
- ‚ö†Ô∏è Food collection allows public read (OK for this use case)

### Production Improvements Needed
- [ ] Add admin role for food management
- [ ] Implement proper order status workflow
- [ ] Add input sanitization
- [ ] Rate limiting for operations
- [ ] Implement proper error logging
- [ ] Add user email verification

---

## üìà Performance Notes

### Optimizations
- ‚úÖ Using StreamBuilder for real-time data
- ‚úÖ Lazy loading with ListView.builder
- ‚úÖ Cached network images
- ‚úÖ Minimal widget rebuilds with Provider

### Areas for Improvement
- [ ] Add pagination for large food lists
- [ ] Implement image caching strategy
- [ ] Add pull-to-refresh
- [ ] Optimize Firestore queries (indexes)
- [ ] Add offline support

---

## üß™ Testing Checklist

### Authentication Tests
- [x] Sign up with valid data
- [x] Sign up with existing email (should fail)
- [x] Login with correct credentials
- [x] Login with wrong password (should fail)
- [x] Logout functionality

### Food Tests
- [x] Load food list from Firestore
- [x] Display food details
- [x] Add food to cart
- [x] Cart badge updates

### Cart Tests
- [x] Add multiple items
- [x] Increase/decrease quantity
- [x] Remove items
- [x] Total calculation
- [x] Empty cart state

### Order Tests
- [x] Place order from cart
- [x] Cart clears after order
- [x] Order appears in Orders tab
- [x] Order details display

### Profile Tests
- [x] View profile data
- [x] Edit profile fields
- [x] Save changes
- [x] Cancel editing

---

## üìö Learning Resources

### Flutter
- [Flutter Documentation](https://docs.flutter.dev/)
- [Provider Package](https://pub.dev/packages/provider)

### Firebase
- [Firebase for Flutter](https://firebase.google.com/docs/flutter/setup)
- [FlutterFire](https://firebase.flutter.dev/)

### Architecture
- [Clean Architecture](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
- [Flutter Architecture Samples](https://github.com/brianegan/flutter_architecture_samples)

---

## üéØ Summary

This food delivery app demonstrates:
- ‚úÖ Clean architecture with separation of concerns
- ‚úÖ Firebase Authentication integration
- ‚úÖ Cloud Firestore for real-time data
- ‚úÖ Provider for state management
- ‚úÖ Material Design UI components
- ‚úÖ Form validation and error handling
- ‚úÖ Real-time updates with streams
- ‚úÖ Responsive and intuitive UX

**Total Lines of Code**: ~2,000 lines across 15 Dart files

**Development Time**: Designed to be completed in 2 days

**Complexity Level**: Intermediate - suitable for learning Flutter + Firebase

**Production Ready**: No - requires additional security, testing, and features
